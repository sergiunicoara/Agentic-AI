# --- Core
DATABASE_URL=postgresql://app:app@db:5432/app

# Primary/replica read-write routing
PRIMARY_DATABASE_URL=postgresql://app:app@db:5432/app
REPLICA_DATABASE_URLS=
MAX_REPLICA_LAG_SECONDS=2.0

# Multi-region hints (optional)
REGION=eu
REPLICA_REGIONS=eu:postgresql://app:app@db:5432/app

# Cross-shard consistency
SHARD_CONSISTENCY_MODE=best_effort
EMBEDDING_VERSION=v1

# --- Providers
EMBED_PROVIDER=mock
LLM_PROVIDER=mock
OPENAI_API_KEY=
OPENAI_CHAT_MODEL=gpt-4.1-mini
OPENAI_EMBED_MODEL=text-embedding-3-small

# --- Retrieval
RETRIEVAL_MODE=hybrid
FUSION_METHOD=rrf
RRF_K=60
RERANK_MODE=mmr
MMR_LAMBDA=0.75
RETRIEVAL_SHARD_DSNS=

# --- Caching (Redis optional)
REDIS_URL=redis://redis:6379/0
CACHE_TTL_S=300
CACHE_MAX_ITEMS=10000

# --- Backpressure / rate control
MAX_IN_FLIGHT_REQUESTS=128
PER_WORKSPACE_RPS=10
PER_WORKSPACE_BURST=20

# --- A/B routing
AB_DEFAULT_EXPERIMENT=baseline
AB_TREATMENT_EXPERIMENT=treatment
AB_ROLLOUT_PERCENT=0
